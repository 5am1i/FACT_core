{% extends "base.html" %}

{% set active_page = "Database" %}


{% block styles %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/pagination.css') }}">
<style>
    .vcenter {
        vertical-align: bottom;
    }
</style>
{% endblock %}


{% block body %}
<script type="text/javascript" src="{{ url_for('static', filename='js/update_url_variables.js') }}"></script>

<div class="row justify-content-center">
    <div class="col-lg-2" id="device-class-dropdown-div">
        <label class="control-label" for="device_class_dropdown" style="text-align:right; font-size: 15px;">
            Device Class:
        </label>
        <select class="form-control form-control-sm" id="device_class_dropdown" name='device_class_dropdown' style="text-align:left"
                onchange="window.location=update_url_variables(update_url_variables(window.location.toString(), 'device_class', this.value), 'page', '')">
            <option value=''></option>
        {% for class in device_classes | sort %}
            <option {% if class in current_class %}selected{% endif %} value='{{ class }}'>{{ class }}</option>
        {% endfor %}
        </select>
    </div>

    <div class="col-lg-2" id="vendor-dropdown-div">
        <label class="control-label" for="vendor_dropdown" style="text-align:right; font-size: 15px;">
            Vendor:
        </label>
        <select class="form-control form-control-sm" id="vendor_dropdown" name='vendor_dropdown' style="text-align:left"
                onchange="window.location=update_url_variables(update_url_variables(window.location.toString(), 'vendor', this.value), 'page', '')">
            <option value='' style="font-size: 14px;"></option>
        {% for vendor in vendors | sort %}
            <option {% if vendor in current_vendor %}selected{% endif %} value='{{ vendor }}' style="font-size: 14px;">{{ vendor }}</option>
        {% endfor %}
        </select>
    </div>

    <script type="text/javascript">
      var url = window.location.href;
      // if "parent firmware search" is activated: hide dropdown filters
      if( url.search( 'only_firmwares=True' ) > 0 ) {
          document.getElementById("device-class-dropdown-div").style.display = "none";
          document.getElementById("vendor-dropdown-div").style.display = "none";
      }
    </script>
</div>

<div class="row justify-content-center py-2">
    <div class="col-lg-6">

        <table class="table table-sm table-responsive table-hover">
        {% for firmware in firmware_list %}
            <tr>
            {% if pagination is defined %}
                <td class="align-middle">{{ loop.index + (page - 1) * per_page }}</td>
            {% endif %}
            {{ firmware | firmware_detail_tabular_field | safe }}
            </tr>
        {% else %}
            <h2>No firmware found in database!</h2>
        {% endfor %}
        </table>

    </div>
</div>

<div class="row justify-content-center">
    <div class="col-lg-4">
        {% if pagination is defined %}
            {{ pagination.info }}
            {{ pagination.links }}
        {% endif %}
    </div>
</div>

{% endblock %}