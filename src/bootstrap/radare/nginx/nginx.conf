worker_processes auto;

events {
	worker_connections 768;
}

http {
	sendfile on;
	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;
	gzip on;

	upstream restapi {
		server app:8080;
	}

	upstream first {
		server app:8001;
	}

	server {
		listen 8000;

		location / {
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;
			proxy_pass http://restapi/;
		}

		location /radare1/ {
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;
		 	proxy_pass http://first/;
		}

	}
}

